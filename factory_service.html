<!DOCTYPE html>
<html ng-app="appAngular">

<head>
    <title>Controller Atributos e funções</title>
    <link rel="stylesheet" type="text/css" media="screen" href="main.css" />
    <meta charset="utf-8" />
    <style>
    </style>

</head>

<body ng-controller="Principal as ctl">
    <!-- Conteúdo da View -->
    <h2>Usando service e factory</h2>
    <div>
        <p>Fornecer um número:
            <input type="number" ng-model="valor" />
        </p>
        <button ng-click="calcularQuadrado()">
            X
            <sup>2</sup>
        </button>
        <p>Resultado: {{resultado}}</p>
    </div>
    <!-- definição da Api e Controller -->
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.6/angular.min.js"></script>
    <script type="text/javascript">
        var appAngular = angular.module("appAngular", []);

        appAngular.factory('MathFactory', function () {
            var factory = {};

            factory.multiplicar = function (a, b) {
                return a * b
            }
            return factory;
        });
        appAngular.service('MathService', function (MathFactory) {
            this.calcularQuadrado = function (a) {
                return MathFactory.multiplicar(a, a);
            }
        });
        appAngular.controller('Principal', function ($scope, MathService) {
            $scope.calcularQuadrado = function () {
                $scope.resultado = MathService.calcularQuadrado($scope.valor);
            }
        });


    </script>

</body>

</html>